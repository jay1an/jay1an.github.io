<!DOCTYPE html>
<html lang="en">
    
    <style>
        body
        {
            font-family: "Times New Roman", Helvetica, Tahoma, Arial,   LXGW WenKai   "notoserifsc-medium", "Microsoft YaHei", "Hiragino Sans GB", "WenQuanYi Micro Hei", sans-serif !important;

        }
    </style>

    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="Git 基础使用" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Jay1an🎈</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jay1an🎈</a> 
            <span class="description">I am who I am.</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">⛩️首页</a></li>
            
        
            
                <li><a href="/list/">🗒️文章</a></li>
            
        
            
                <li><a href="/categories/">🏷️分类</a></li>
            
        
            
                <li><a href="/about/">🎨关于</a></li>
            
        
            
                <li><a href="/now/">🎡Now</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    Git 基础使用
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>最近更新：2024-07-15</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>字数总计：7.2k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：28分钟</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        阅读量：<span id="busuanzi_value_page_pv"></span>次
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Git-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="post-toc-text">Git 基础使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6"><span class="post-toc-text">版本控制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Git-%E5%9F%BA%E7%A1%80%EF%BC%88%E6%9C%AC%E5%9C%B0%EF%BC%89"><span class="post-toc-text">Git 基础（本地）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%8E%B7%E5%8F%96-Git-%E4%BB%93%E5%BA%93"><span class="post-toc-text">获取 Git 仓库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8D%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="post-toc-text">检查当前文件状态</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%B7%9F%E8%B8%AA%E6%96%B0%E6%96%87%E4%BB%B6"><span class="post-toc-text">跟踪新文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9A%82%E5%AD%98%E5%B7%B2%E4%BF%AE%E6%94%B9%E7%9A%84%E6%96%87%E4%BB%B6"><span class="post-toc-text">暂存已修改的文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%80%E8%A7%88"><span class="post-toc-text">状态简览</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6"><span class="post-toc-text">忽略文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E7%BB%8F%E6%9A%82%E5%AD%98%E5%92%8C%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="post-toc-text">查看已经暂存和未暂存的修改</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%8F%90%E4%BA%A4%E6%9B%B4%E6%96%B0"><span class="post-toc-text">提交更新</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%B7%B3%E8%BF%87%E6%9A%82%E5%AD%98%E5%8C%BA%E5%9F%9F"><span class="post-toc-text">跳过暂存区域</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%A7%BB%E9%99%A4%E6%96%87%E4%BB%B6"><span class="post-toc-text">移除文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="post-toc-text">移动文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="post-toc-text">文件状态</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9C%AA%E8%B7%9F%E8%B8%AA%EF%BC%88Untracked%EF%BC%89"><span class="post-toc-text">未跟踪（Untracked）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%B7%B2%E8%B7%9F%E8%B8%AA%EF%BC%88Tracked%EF%BC%89"><span class="post-toc-text">已跟踪（Tracked）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E5%B7%B2%E4%BF%AE%E6%94%B9%EF%BC%88Modified%EF%BC%89"><span class="post-toc-text">已修改（Modified）</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E6%9A%82%E5%AD%98%EF%BC%88Staged%EF%BC%89"><span class="post-toc-text">暂存（Staged）</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E5%B7%B2%E6%8F%90%E4%BA%A4%EF%BC%88Committed%EF%BC%89"><span class="post-toc-text">已提交（Committed）</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="post-toc-text">示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2"><span class="post-toc-text">查看提交历史</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%92%A4%E9%94%80%E6%93%8D%E4%BD%9C"><span class="post-toc-text">撤销操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#git-reset"><span class="post-toc-text">git reset</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9"><span class="post-toc-text">常用选项</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%94%A8%E9%80%94"><span class="post-toc-text">用途</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="post-toc-text">示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#git-checkout"><span class="post-toc-text">git checkout</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%94%A8%E9%80%94-1"><span class="post-toc-text">用途</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="post-toc-text">示例</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="post-toc-text">注意</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#git-commit-amend"><span class="post-toc-text">git commit --amend</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%94%A8%E9%80%94-2"><span class="post-toc-text">用途</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E7%A4%BA%E4%BE%8B-3"><span class="post-toc-text">示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%AF%94%E8%BE%83"><span class="post-toc-text">比较</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="post-toc-text">小结</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="post-toc-text">远程仓库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#git-remote-add"><span class="post-toc-text">git remote add &lt;name&gt; &lt;url&gt;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%8D%8F%E4%BD%9C"><span class="post-toc-text">多个远程仓库协作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"><span class="post-toc-text">镜像仓库</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#git-push-origin-main"><span class="post-toc-text">git push origin main</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF"><span class="post-toc-text">分支</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="post-toc-text">分支的基本操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF"><span class="post-toc-text">查看分支</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="post-toc-text">创建分支</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="post-toc-text">切换分支</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="post-toc-text">合并分支</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF"><span class="post-toc-text">删除分支</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GUI-%E5%9B%BE%E7%A4%BA"><span class="post-toc-text">GUI 图示</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%A7%A3%E5%86%B3%E5%90%88%E5%B9%B6%E5%86%B2%E7%AA%81"><span class="post-toc-text">解决合并冲突</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Rebase-%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="post-toc-text">Rebase 合并分支</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="post-toc-text">分支的使用场景</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="post-toc-text">功能开发</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E9%94%99%E8%AF%AF%E4%BF%AE%E5%A4%8D"><span class="post-toc-text">错误修复</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BB%A3%E7%A0%81%E8%AF%84%E5%AE%A1"><span class="post-toc-text">代码评审</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E7%A4%BA%E4%BE%8B"><span class="post-toc-text">分支工作流程示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="post-toc-text">分支管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Git%E5%88%86%E6%94%AF%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%A8%A1%E5%9E%8B"><span class="post-toc-text">Git分支工作流模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Git-Flow"><span class="post-toc-text">Git Flow</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E7%B1%BB%E5%9E%8B"><span class="post-toc-text">分支类型</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="post-toc-text">工作流</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GitHub-Flow"><span class="post-toc-text">GitHub Flow</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E5%91%BD%E5%90%8D"><span class="post-toc-text">分支命名</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E4%B9%A0%E6%83%AF"><span class="post-toc-text">分支管理习惯</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E9%99%84"><span class="post-toc-text">附</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%B8%BA-Git-%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%90%86"><span class="post-toc-text">为 Git 添加代理</span></a></li></ol></li></ol></li></ol>
            
        
        <div class=".article-gallery"><h1 id="Git-基础使用"><a href="#Git-基础使用" class="headerlink" title="Git 基础使用"></a>Git 基础使用</h1><p>此博客记录针对 Git 的学习，整合资料。</p>
<p>参考：</p>
<ol>
<li><p><a target="_blank" rel="noopener" href="https://git-scm.com/doc">Git - Documentation (git-scm.com)</a> </p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1HM411377j?vd_source=803c7c402f5d0969ae4bcfec40129c57">【GeekHour】一小时Git教程</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.atlassian.com/zh/git/tutorials">Git 教程和培训 | Atlassian Git Tutorial</a></p>
</li>
</ol>
<h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><p>版本控制工具是软件开发中不可或缺的一部分。它们用于记录文件的变化，使开发者能够回溯到之前的任何版本，并跟踪和管理项目的历史版本。这对于团队协作开发尤为重要，因为它能够帮助团队成员在不同的功能分支上独立工作，最后再将各自的工作合并到一起。</p>
<p>传统的版本控制系统（如 SVN）通常是集中式的，所有版本控制操作都通过一个中央服务器来完成。这种方法有一个显著的缺点：如果中央服务器出现问题，所有人都无法工作。这时，分布式版本控制系统（Distributed Version Control System，简称 DVCS）应运而生。</p>
<p>在 DVCS 中，如 Git、Mercurial 以及 Darcs，客户端并不只是提取最新版本的文件快照，而是把整个代码仓库完整地镜像下来，包括完整的历史记录。每个开发者都有一个完整的代码库副本，包含所有的分支和提交记录。</p>
<p>这样一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。因为每一次的克隆操作，实际上都是一次对代码仓库的完整备份。</p>
<p><strong>具体实例</strong></p>
<p>假设你有一个使用 DVCS 的项目，当你克隆（clone）一个远程仓库时，你得到的不是仅仅一个最新版本的代码快照，而是整个仓库的完整副本，包括所有的分支和历史记录。这意味着你可以在本地执行几乎所有的版本控制操作，而不需要依赖网络连接。</p>
<p>在团队协作中，每个开发者可以独立地在自己的分支上工作，当一个功能完成时，可以将其合并到主分支中。而且，如果一个开发者的工作出现问题，不会影响其他人的工作，因为每个人都有自己的代码库副本。</p>
<h2 id="Git-基础（本地）"><a href="#Git-基础（本地）" class="headerlink" title="Git 基础（本地）"></a>Git 基础（本地）</h2><h3 id="获取-Git-仓库"><a href="#获取-Git-仓库" class="headerlink" title="获取 Git 仓库"></a>获取 Git 仓库</h3><p>通常有两种获取 Git 项目仓库的方式：</p>
<ol>
<li><p>将尚未进行版本控制的本地目录转换为 Git 仓库；</p>
<p>进入项目目录，再执行 <code>git init</code>命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /my_project</span><br><span class="line">$ git init</span><br></pre></td></tr></table></figure>
</li>
<li><p>从其它服务器 <strong>克隆</strong> 一个已存在的 Git 仓库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> &lt;url&gt; </span><br></pre></td></tr></table></figure>

<p>克隆远程仓库到本地，还可以通过额外的参数指定克隆到本地的仓库的名字。</p>
</li>
</ol>
<p>克隆之后，可以开始追踪仓库中的文件，使用<code>git add</code>命令，热案后执行<code>git commit</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add *.c</span><br><span class="line">$ git add LICENSE</span><br><span class="line">$ git commit -m <span class="string">&#x27;initial project version&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="检查当前文件状态"><a href="#检查当前文件状态" class="headerlink" title="检查当前文件状态"></a>检查当前文件状态</h3><p>可以使用 <code>git status</code> 命令查看哪些文件处于什么状态。</p>
<h3 id="跟踪新文件"><a href="#跟踪新文件" class="headerlink" title="跟踪新文件"></a>跟踪新文件</h3><p>使用命令 <code>git add</code> 开始跟踪一个文件。</p>
<h3 id="暂存已修改的文件"><a href="#暂存已修改的文件" class="headerlink" title="暂存已修改的文件"></a>暂存已修改的文件</h3><p>如果修改了一个已经被跟踪的文件，再执行<code>git status</code>命令，就会出现<code>Changes not staged for commit</code>，说明跟踪文件内容发生了变化，但是没有放到暂存区，如果要暂存这次更新，还需要运行一次<code>git add</code></p>
<blockquote>
<p><code>git add</code></p>
<p>这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。 将这个命令理解为“精确地将内容添加到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。</p>
<p>运行了 <code>git add</code> 之后又作了修订的文件，需要重新运行 <code>git add</code> 把最新版本重新暂存起来</p>
</blockquote>
<h3 id="状态简览"><a href="#状态简览" class="headerlink" title="状态简览"></a>状态简览</h3><p><code>git status</code> 命令的输出十分详细，但是内容有一点繁琐。</p>
<p>可以使用<code>git status -s</code>命令得到更精简的输出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A  lib/git.rb</span><br><span class="line">M  lib/simplegit.rb</span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure>

<p>新添加的未跟踪文件前面有 <code>??</code> 标记，新添加到暂存区中的文件前面有 <code>A</code> 标记，修改过的文件前面有 <code>M</code> 标记。 输出中有两栏，<strong>左栏指明了暂存区的状态，右栏指明了工作区的状态。</strong>例如，上面的状态报告显示： <code>README</code> 文件在工作区已修改但尚未暂存，而 <code>lib/simplegit.rb</code> 文件已修改且已暂存。 <code>Rakefile</code> 文件已修改，暂存后又作了修改，因此该文件的修改中既有已暂存的部分，又有未暂存的部分。</p>
<h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><p>在 Git 仓库目录下，有一些文件可能还会随着项目的编译运行而产生，比如说日志或者编译产生的临时文件，我们并不想这些文件被 Git 标记为未跟踪状态，这时就可以创建一个名为<code>.gitignore</code>文件，列出要忽略的文件模式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 忽略所有的 .a 文件</span></span><br><span class="line">*.a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 但跟踪所有的 lib.a，即便你在前面忽略了 .a 文件</span></span><br><span class="line">!lib.a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只忽略当前目录下的 TODO 文件，而不忽略 subdir/TODO</span></span><br><span class="line">/TODO</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略任何目录下名为 build 的文件夹</span></span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略 doc/notes.txt，但不忽略 doc/server/arch.txt</span></span><br><span class="line">doc/*.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略 doc/ 目录及其所有子目录下的 .pdf 文件</span></span><br><span class="line">doc/**/*.pdf</span><br></pre></td></tr></table></figure>

<h3 id="查看已经暂存和未暂存的修改"><a href="#查看已经暂存和未暂存的修改" class="headerlink" title="查看已经暂存和未暂存的修改"></a>查看已经暂存和未暂存的修改</h3><p>使用<code>git status</code>可以大致知道那些文件被修改了，但却不能精确知道修改的内容与位置。</p>
<p>要查看尚未暂存的文件更新了哪些部分，这时可以使用<code>git diff</code>命令。</p>
<blockquote>
<p>git diff 本身只显示尚未暂存的改动，而不是自上次提交以来所做的所有改动。</p>
</blockquote>
<p><code>git diff --staged</code> 这条命令将比对已暂存文件与最后一次提交的文件差异</p>
<h3 id="提交更新"><a href="#提交更新" class="headerlink" title="提交更新"></a>提交更新</h3><p>现在的暂存区已经准备就绪，可以提交了。 在此之前，请务必确认还有什么已修改或新建的文件还没有 <code>git add</code> 过， 否则提交的时候不会记录这些尚未暂存的变化。 这些已修改但未暂存的文件只会保留在本地磁盘。 所以，每次准备提交前，先用 <code>git status</code> 看下，你所需要的文件是不是都已暂存起来了， 然后再运行提交命令 <code>git commit</code>。</p>
<p>还可以添加<code>-m</code>选项，将提交信息与命令放在同一行。</p>
<h3 id="跳过暂存区域"><a href="#跳过暂存区域" class="headerlink" title="跳过暂存区域"></a>跳过暂存区域</h3><p>尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。 Git 提供了一个跳过使用暂存区域的方式， 只要在提交的时候，给 <code>git commit</code> 加上 <code>-a</code> 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 <code>git add</code> 步骤。</p>
<h3 id="移除文件"><a href="#移除文件" class="headerlink" title="移除文件"></a>移除文件</h3><p>要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。 可以用 <code>git rm</code> 命令完成此项工作，<strong>并连带从工作目录中删除指定的文件</strong>，这样以后就不会出现在未跟踪文件清单中了。</p>
<p>如果只是简单地从工作目录中手工删除文件，运行 <code>git status</code> 时就会在 “Changes not staged for commit” 部分（也就是 <em>未暂存清单</em>）看到:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">rm</span> PROJECTS.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        deleted:    PROJECTS.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>上面命令会将工作区的文件也删除，如果需要将文件<strong>从Git仓库中删除，但并不想从工作区中移除</strong>，就需要用到如下命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached filename</span><br></pre></td></tr></table></figure>

<h3 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h3><blockquote>
<p>如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。 </p>
</blockquote>
<p>要在 Git 中对文件改名，可以这么做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">mv</span> file_from file_to</span><br></pre></td></tr></table></figure>

<p>运行 <code>git mv</code> 就相当于运行了下面三条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mv</span> README.md README</span><br><span class="line">$ git <span class="built_in">rm</span> README.md</span><br><span class="line">$ git add README</span><br></pre></td></tr></table></figure>

<p>所以在使用其他工具重命名文件时，记得在提交前 <code>git rm</code> 删除旧文件名，再 <code>git add</code> 添加新文件名。</p>
<h3 id="文件状态"><a href="#文件状态" class="headerlink" title="文件状态"></a>文件状态</h3><p>Git 文件在版本控制过程中的状态主要有以下三种：未跟踪、已跟踪（包括已修改和暂存）。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Untracked --- git add ---&gt; Staged --- git commit ---&gt; Committed</span><br><span class="line">                      |                           |</span><br><span class="line">                      v                           |</span><br><span class="line">                   Modified ----------------------</span><br><span class="line">                       <span class="built_in">^</span>       git add       |</span><br><span class="line">                       |---------------------|</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a href="/../img/git/lifecycle.png" title="Git 下文件生命周期图。" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/lifecycle.png" alt="Git 下文件生命周期图。"></a></p>
<h4 id="未跟踪（Untracked）"><a href="#未跟踪（Untracked）" class="headerlink" title="未跟踪（Untracked）"></a>未跟踪（Untracked）</h4><p>未跟踪的文件是指在 Git 仓库中尚未被 Git 跟踪的文件。它们通常是新添加到工作目录中的文件，但还没有被添加到版本控制中。</p>
<ul>
<li><strong>状态</strong>：未跟踪</li>
<li><strong>操作</strong>：使用 <code>git add &lt;file&gt;</code> 命令将文件添加到暂存区，使其进入已跟踪状态。</li>
</ul>
<h4 id="已跟踪（Tracked）"><a href="#已跟踪（Tracked）" class="headerlink" title="已跟踪（Tracked）"></a>已跟踪（Tracked）</h4><p>已跟踪的文件是指已经被 Git 仓库跟踪的文件。已跟踪的文件分为以下三种状态：</p>
<h5 id="已修改（Modified）"><a href="#已修改（Modified）" class="headerlink" title="已修改（Modified）"></a>已修改（Modified）</h5><p>已修改的文件是指文件内容发生了变化，但这些变化尚未被记录到暂存区。</p>
<ul>
<li><strong>状态</strong>：已修改</li>
<li><strong>操作</strong>：使用 <code>git add &lt;file&gt;</code> 命令将文件的修改添加到暂存区。</li>
</ul>
<h5 id="暂存（Staged）"><a href="#暂存（Staged）" class="headerlink" title="暂存（Staged）"></a>暂存（Staged）</h5><p>暂存的文件是指文件的修改已经被添加到暂存区，将在下一次提交中被记录。</p>
<ul>
<li><strong>状态</strong>：暂存</li>
<li><strong>操作</strong>：使用 <code>git commit -m &quot;message&quot;</code> 命令将暂存区的修改提交到本地仓库。</li>
</ul>
<h5 id="已提交（Committed）"><a href="#已提交（Committed）" class="headerlink" title="已提交（Committed）"></a>已提交（Committed）</h5><p>已提交的文件是指文件的修改已经被提交到本地仓库，成为项目历史的一部分。</p>
<ul>
<li><strong>状态</strong>：已提交</li>
<li><strong>操作</strong>：文件已经被提交，不需要额外操作，除非进行新的修改。</li>
</ul>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>用 <code>git status</code> 命令查看哪些文件处于什么状态</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化 Git 仓库</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个新文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello, Git&quot;</span> &gt; example.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：Untracked files: example.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将文件添加到暂存区</span></span><br><span class="line">git add example.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：Changes to be committed: new file: example.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交文件</span></span><br><span class="line">git commit -m <span class="string">&quot;Add example.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：nothing to commit, working tree clean</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Update example.txt&quot;</span> &gt;&gt; example.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：Changes not staged for commit: modified: example.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将修改添加到暂存区</span></span><br><span class="line">git add example.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：Changes to be committed: modified: example.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交修改</span></span><br><span class="line">git commit -m <span class="string">&quot;Update example.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 输出：nothing to commit, working tree clean</span></span><br></pre></td></tr></table></figure>

<h3 id="查看提交历史"><a href="#查看提交历史" class="headerlink" title="查看提交历史"></a>查看提交历史</h3><p>使用<code>git log</code>命令查看提交历史。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class="line"></span><br><span class="line">    removed unnecessary <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Sat Mar 15 10:31:28 2008 -0700</span><br><span class="line"></span><br><span class="line">    first commit</span><br></pre></td></tr></table></figure>

<p>不加任何参数，<code>git log</code>会按照时间先后顺序列出所有的<code>commit</code>，最新的在上面。会列出每个提交的 SHA-1 校验和、作者的名字和电子邮件地址、提交时间以及提交说明。</p>
<p><code>git log</code>还有很多功能选项：</p>
<table>
<thead>
<tr>
<th align="left">选项</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-p</code></td>
<td align="left">按补丁格式显示每个提交引入的差异。</td>
</tr>
<tr>
<td align="left"><code>--stat</code></td>
<td align="left">显示每次提交的文件修改统计信息。</td>
</tr>
<tr>
<td align="left"><code>--shortstat</code></td>
<td align="left">只显示 –stat 中最后的行数修改添加移除统计。</td>
</tr>
<tr>
<td align="left"><code>--name-only</code></td>
<td align="left">仅在提交信息后显示已修改的文件清单。</td>
</tr>
<tr>
<td align="left"><code>--name-status</code></td>
<td align="left">显示新增、修改、删除的文件清单。</td>
</tr>
<tr>
<td align="left"><code>--abbrev-commit</code></td>
<td align="left">仅显示 SHA-1 校验和所有 40 个字符中的前几个字符。</td>
</tr>
<tr>
<td align="left"><code>--relative-date</code></td>
<td align="left">使用较短的相对时间而不是完整格式显示日期（比如“2 weeks ago”）。</td>
</tr>
<tr>
<td align="left"><code>--graph</code></td>
<td align="left">在日志旁以 ASCII 图形显示分支与合并历史。</td>
</tr>
<tr>
<td align="left"><code>--pretty</code></td>
<td align="left">使用其他格式显示历史提交信息。可用的选项包括 oneline、short、full、fuller 和 format（用来定义自己的格式）。</td>
</tr>
<tr>
<td align="left"><code>--oneline</code></td>
<td align="left"><code>--pretty=oneline --abbrev-commit</code> 合用的简写。</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2">Git - 查看提交历史 (git-scm.com)</a></p>
<h3 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h3><h4 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a><code>git reset</code></h4><p><code>git reset</code> 用于重置当前分支的 HEAD 到指定的提交，并可以选择性地重置暂存区和工作目录中的文件。</p>
<h5 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h5><ol>
<li>**<code>git reset --soft</code>**：重置 HEAD 到指定提交，但保留暂存区和工作目录中的更改。</li>
<li><strong><code>git reset --mixed</code>（默认）</strong>：重置 HEAD 和暂存区到指定提交，但保留工作目录中的更改。</li>
<li>**<code>git reset --hard</code>**：重置 HEAD、暂存区和工作目录到指定提交，丢弃所有更改。</li>
</ol>
<h5 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h5><ul>
<li><p><strong>撤销提交</strong>：撤销一个或多个提交，同时选择保留或丢弃更改。</p>
</li>
<li><p><strong>撤销文件暂存：</strong><code>git reset HEAD filename</code></p>
<p>这个命令用于取消对特定文件的暂存，但保留工作目录中的更改。这在你已经使用 <code>git add</code> 将文件添加到暂存区，但又希望将其从暂存区移除时非常有用。</p>
</li>
</ul>
<h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销最后一个提交，保留更改在暂存区和工作目录中</span></span><br><span class="line">git reset --soft HEAD~1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销最后一个提交，并取消暂存区中的更改，但保留工作目录中的更改</span></span><br><span class="line">git reset HEAD~1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销最后一个提交，并丢弃所有更改</span></span><br><span class="line">git reset --hard HEAD~1</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取消暂存文件</span></span><br><span class="line">git reset HEAD filename</span><br></pre></td></tr></table></figure>

<h4 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a><code>git checkout</code></h4><p><code>git checkout</code> 主要用于切换分支和恢复工作目录中的文件。</p>
<h5 id="用途-1"><a href="#用途-1" class="headerlink" title="用途"></a>用途</h5><ul>
<li><strong>切换分支</strong>：在不同分支之间切换。</li>
<li><strong>恢复文件</strong>：从某个提交或分支中恢复文件到工作目录中。</li>
</ul>
<h5 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到分支</span></span><br><span class="line">git checkout branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复工作目录中的文件到最近的提交</span></span><br><span class="line">git checkout -- filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复工作目录中的文件到指定的提交</span></span><br><span class="line">git checkout commit_hash -- filename</span><br></pre></td></tr></table></figure>

<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p><code>git checkout</code> 在 Git 2.23.0 之后，被推荐使用 <code>git switch</code> 和 <code>git restore</code> 命令来替代，以减少命令的歧义。</p>
<h4 id="git-commit-amend"><a href="#git-commit-amend" class="headerlink" title="git commit --amend"></a><code>git commit --amend</code></h4><p><code>git commit --amend</code> 用于修改最近一次的提交。它允许你在不创建新提交的情况下更新上一次提交的内容或提交信息。</p>
<h5 id="用途-2"><a href="#用途-2" class="headerlink" title="用途"></a>用途</h5><ul>
<li><strong>修改提交信息</strong>：修正最近一次提交的提交信息。</li>
<li><strong>添加遗漏的更改</strong>：将遗漏的更改添加到最近一次提交中。</li>
</ul>
<blockquote>
<p> 当你在修补最后的提交时，与其说是修复旧提交，倒不如说是完全用一个 <strong>新的提交</strong> 替换旧的提交， 理解这一点非常重要。从效果上来说，就像是旧有的提交从未存在过一样，它并不会出现在仓库的历史中。</p>
</blockquote>
<h5 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改最近一次提交的提交信息</span></span><br><span class="line">git commit --amend</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加遗漏的更改并修改最近一次提交</span></span><br><span class="line">git add forgotten_file</span><br><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>

<h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h4><ul>
<li>**<code>git reset</code>**：重置当前分支的 HEAD、暂存区和工作目录到指定的提交。适用于撤销一个或多个提交，可以选择保留或丢弃更改。</li>
<li>**<code>git checkout</code>**：切换分支或恢复文件到工作目录。适用于切换分支和恢复文件。</li>
<li>**<code>git commit --amend</code>**：修改最近一次的提交。适用于修正提交信息或添加遗漏的更改。</li>
</ul>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><ul>
<li><strong>撤销提交</strong>：<code>git reset</code> 和 <code>git commit --amend</code> 都可以用于撤销提交，但 <code>git reset</code> 更强大，可以撤销多个提交。</li>
<li><strong>修改提交</strong>：<code>git commit --amend</code> 专用于修改最近一次提交。</li>
<li><strong>恢复文件</strong>：<code>git checkout</code> 用于从某个提交或分支恢复文件。</li>
</ul>
<blockquote>
<p>记住，在 Git 中任何 <strong>已提交</strong> 的东西几乎总是可以恢复的。 甚至那些被删除的分支中的提交或使用 <code>--amend</code> 选项覆盖的提交也可以恢复</p>
</blockquote>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>在使用 Git 的过程中，远程仓库是一个非常重要的概念。远程仓库是托管在互联网上或其他网络上的 Git 仓库，它使得我们可以与其他开发者协同工作，共同开发项目。</p>
<p><strong>为什么使用远程仓库？</strong></p>
<p><strong>协作开发</strong>：远程仓库允许多个开发者同时对同一个项目进行开发，团队成员可以各自提交自己的更改，并将这些更改推送到远程仓库。这样，所有人都可以同步到最新的代码状态。</p>
<p><strong>备份代码</strong>：将代码推送到远程仓库可以作为代码的备份。即使本地仓库发生故障或丢失，也可以从远程仓库中恢复代码。</p>
<h3 id="git-remote-add"><a href="#git-remote-add" class="headerlink" title="git remote add &lt;name&gt; &lt;url&gt;"></a><code>git remote add &lt;name&gt; &lt;url&gt;</code></h3><h4 id="多个远程仓库协作"><a href="#多个远程仓库协作" class="headerlink" title="多个远程仓库协作"></a>多个远程仓库协作</h4><p>在团队协作中，不同的开发者可能会有各自的远程仓库进行开发。你可以将他们的仓库添加为远程仓库，以便拉取他们的更改并与他们协作。</p>
<p>例如，你的同事 <code>Alice</code> 有一个仓库，你可以将她的仓库添加为 <code>alice</code>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add alice https://github.com/alice/repository.git</span><br></pre></td></tr></table></figure>

<p>这样你可以从 <code>Alice</code> 的仓库中获取代码：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch alice</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>git fetch &lt;remote&gt;</code> 从远程仓库获取数据，但不进行合并。它会更新本地存储的远程分支信息。</p>
<p><code>git pull &lt;remote&gt; &lt;branch&gt;</code> 从远程仓库获取数据并自动合并到当前分支。它实际上是 <code>git fetch</code> 和 <code>git merge</code> 的组合。</p>
</blockquote>
<h4 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h4><p>有时候，你可能需要将你的代码推送到多个远程仓库。比如，你可以同时推送到 GitHub 和 GitLab：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add github https://github.com/username/repository.git</span><br><span class="line">git remote add gitlab https://gitlab.com/username/repository.git</span><br></pre></td></tr></table></figure>

<p>然后你可以分别推送代码到两个远程仓库：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push github main</span><br><span class="line">git push gitlab main</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>git push &lt;remote&gt; &lt;branch&gt;</code> 将本地分支的更新推送到远程仓库</p>
</blockquote>
<h3 id="git-push-origin-main"><a href="#git-push-origin-main" class="headerlink" title="git push origin main"></a><code>git push origin main</code></h3><p><code>git push origin main </code>命令用于将本地的 <code>main</code> 分支的更新推送（push）到远程仓库 <code>origin</code> 的 <code>main</code> 分支上。</p>
<p>具体含义如下：</p>
<ul>
<li><strong><code>git push</code></strong>: 用于将本地仓库的提交推送到远程仓库。</li>
<li><strong><code>origin</code></strong>: 远程仓库的名称，通常默认为 <code>origin</code>，它是你本地仓库与远程仓库的关联名字。</li>
<li><strong><code>main</code></strong>: 本地的分支名称，在这个例子中指的是你的本地 <code>main</code> 分支。</li>
</ul>
<p>但是若果是协作，提交时必须将上游的工作拉下来合并进自己的工作之后才能推送。</p>
<blockquote>
<p>git remote rename <old_name> <new_name> 远程仓库重命名</p>
<p>git remote remove 移除远程仓库</p>
</blockquote>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>分支让工作者可以从开发主线分离出来，在不影响主线的情况下进行开发、修复错误或尝试新的想法。分支是轻量级的，可以很容易地创建和删除。理解和使用分支对于高效的版本控制和团队协作非常重要。</p>
<h3 id="分支的基本操作"><a href="#分支的基本操作" class="headerlink" title="分支的基本操作"></a>分支的基本操作</h3><h4 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>

<p>这个命令会列出所有的本地分支，并在当前所在的分支前加上 <code>*</code> 标记。</p>
<h4 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<h4 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout feature</span><br></pre></td></tr></table></figure>

<p>或者可以使用 <code>-b</code> 选项同时创建并切换到新分支：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>git checkout</code>还有恢复目录和文件的功能，为了避免混淆。</p>
<p>有一个专门用于切换分支的命令<code>git switch</code> (Git 2.23.0 版本之后)</p>
<p><strong>切换到现有分支</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<p><strong>创建并切换到新分支</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch -c &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>注意：切换分支会导致工作区也发生变化。</p>
<h4 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h4><p>当你在一个分支上完成开发后，可以将这个分支合并到另一个分支。例如，合并 <code>feature</code> 分支到 <code>main</code> 分支：</p>
<p>首先切换到目标分支（例如 <code>main</code>）：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br></pre></td></tr></table></figure>

<p>然后执行合并操作：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge feature</span><br></pre></td></tr></table></figure>

<h4 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h4><p>如果一个分支不再需要，可以将其删除：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<p>例如，删除 <code>feature</code> 分支：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d feature</span><br></pre></td></tr></table></figure>

<p>注意：如果分支未被合并到主分支中，<code>-d</code> 命令会拒绝删除。要强制删除，可以使用 <code>-D</code> 选项：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<h4 id="GUI-图示"><a href="#GUI-图示" class="headerlink" title="GUI 图示"></a>GUI 图示</h4><p>main分支和dev分支共同开发。</p>
<p><a href="/../img/git/image-20240715142226054.png" title="image-20240715142226054" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/image-20240715142226054.png" alt="image-20240715142226054"></a></p>
<p>切换到main分支，执行<code>git merge dev</code>命令，Git 会自动为我们产生一次提交，将dev分支的内容合并到main分支中。</p>
<p><a href="/../img/git/image-20240715150541479.png" title="image-20240715150541479" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/image-20240715150541479.png" alt="image-20240715150541479"></a></p>
<p>注意：分支在合并之后并不会自动被删除，如果需要删除不再需要的分支需要手动删除分支。</p>
<h3 id="解决合并冲突"><a href="#解决合并冲突" class="headerlink" title="解决合并冲突"></a>解决合并冲突</h3><p>如果两个分支的修改内容没有重合部分，那么合并分支非常简单且顺利。</p>
<p><strong>但是如果两个分支修改了同一个文件的同一行代码</strong>，Git 就不知道应该保留哪个分支的内容了，这就是合并分支时产生的冲突，需要手动解决冲突。</p>
<p><strong>示例：</strong></p>
<p>假设你有两个分支：<code>main</code> 和 <code>feature</code>，它们对同一个文件 <code>example.txt</code> 进行了不同的修改。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git merge feature</span><br></pre></td></tr></table></figure>

<p>Git 会显示合并冲突的提示，告诉你哪些文件存在冲突：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Auto-merging example.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> example.txt</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>

<p>打开冲突的文件 <code>example.txt</code>，你会看到冲突的标记：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="string">HEAD</span></span><br><span class="line"><span class="string">这是 main 分支的修改。</span></span><br><span class="line"><span class="string">=======</span></span><br><span class="line"><span class="string">这是 feature 分支的修改。</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> 和 <code>=======</code> 之间的部分是 <code>main</code> 分支的内容。</p>
<p><code>=======</code> 和 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature</code> 之间的部分是 <code>feature</code> 分支的内容。</p>
<p>根据需要手动编辑冲突的文件，保留你想要的修改，直接修改example.txt文件内容。</p>
<p>编辑完冲突的文件后，保存并关闭文件。然后使用 <code>git add</code> 命令将解决冲突的文件标记为已解决：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add example.txt</span><br></pre></td></tr></table></figure>

<p>最后，提交合并的结果：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit</span><br></pre></td></tr></table></figure>

<h3 id="Rebase-合并分支"><a href="#Rebase-合并分支" class="headerlink" title="Rebase 合并分支"></a>Rebase 合并分支</h3><p>Rebase 的基本思想是<strong>将一个分支的所有提交（公共祖先节点之后）重新应用到另一个分支的顶部</strong>。这样可以避免产生不必要的合并提交，从而<strong>保持历史记录的线性</strong>。</p>
<p>所以也可以通过<code>rebase</code>命令进行分支的“合并”。</p>
<p><a href="/../img/git/image-20240715154610291.png" title="image-20240715154610291" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/image-20240715154610291.png" alt="image-20240715154610291"></a></p>
<p>如果遇到冲突，还是需要手动解决并暂存更改，然后使用<code>git rebase -- continue</code>命令或者<code>git rebase --abort</code>中止操作。</p>
<h3 id="分支的使用场景"><a href="#分支的使用场景" class="headerlink" title="分支的使用场景"></a>分支的使用场景</h3><h4 id="功能开发"><a href="#功能开发" class="headerlink" title="功能开发"></a>功能开发</h4><p>在开发新功能时，可以创建一个新的分支来进行开发。这样可以确保主分支保持稳定，并且可以随时在新分支上进行试验和修改。</p>
<h4 id="错误修复"><a href="#错误修复" class="headerlink" title="错误修复"></a>错误修复</h4><p>在修复错误时，可以创建一个新的分支来进行修复工作。完成修复后，可以将修复分支合并回主分支。</p>
<h4 id="代码评审"><a href="#代码评审" class="headerlink" title="代码评审"></a>代码评审</h4><p>在团队协作中，分支可以用来提交代码进行评审。在提交代码之前，可以将代码推送到一个单独的分支，并请求团队成员进行评审和测试。</p>
<h3 id="分支工作流程示例"><a href="#分支工作流程示例" class="headerlink" title="分支工作流程示例"></a>分支工作流程示例</h3><ol>
<li><p><strong>创建新分支并切换到新分支</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b feature-branch</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在新分支上进行开发</strong>： 修改文件并提交更改：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Add new feature&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将新分支推送到远程仓库</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin feature-branch</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这会在远程仓库 <code>origin</code> 中创建一个名为 <code>feature-branch</code> 的分支，并将本地的 <code>feature-branch</code> 分支内容推送到远程分支中。</p>
</blockquote>
</li>
<li><p><strong>创建拉取请求</strong>：在 GitHub 或其他托管平台上创建拉取请求，请求团队成员评审代码。</p>
<blockquote>
<p>团队成员可以使用 <code>git fetch</code> 或 <code>git pull</code> 命令将这个远程分支拉取到本地：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br></pre></td></tr></table></figure>

<p>然后切换到该分支：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout feature-branch</span><br></pre></td></tr></table></figure>

<p>这样将远程分支拉取到本地，允许团队成员共同访问和协作</p>
</blockquote>
</li>
<li><p><strong>合并分支</strong>：代码评审通过后，将新分支合并到主分支：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git merge feature-branch</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除本地和远程分支</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -d feature-branch</span><br><span class="line">git push origin --delete feature-branch</span><br></pre></td></tr></table></figure></li>
</ol>
<p>通过使用分支，你可以有效地管理不同的开发任务，保持代码库的整洁和有序。分支提供了灵活性，使你可以在不影响主分支的情况下进行各种尝试和开发工作。</p>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><h3 id="Git分支工作流模型"><a href="#Git分支工作流模型" class="headerlink" title="Git分支工作流模型"></a>Git分支工作流模型</h3><h4 id="Git-Flow"><a href="#Git-Flow" class="headerlink" title="Git Flow"></a>Git Flow</h4><h5 id="分支类型"><a href="#分支类型" class="headerlink" title="分支类型"></a><strong>分支类型</strong></h5><ul>
<li>**<code>main</code>**：主分支，永远保持稳定和可发布状态。</li>
<li>**<code>develop</code>**：开发分支，所有的开发功能都基于这个分支。</li>
<li>**<code>feature/*</code>**：功能分支，从 <code>develop</code> 分支创建，用于开发新功能。</li>
<li>**<code>release/*</code>**：发布分支，从 <code>develop</code> 分支创建，用于准备新版本的发布。</li>
<li>**<code>hotfix/*</code>**：修复分支，从 <code>main</code> 分支创建，用于修复生产环境的紧急问题。</li>
</ul>
<h5 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h5><ol>
<li><p><strong>新功能开发</strong>：</p>
<ul>
<li>从 <code>develop</code> 分支创建一个 <code>feature</code> 分支。</li>
<li>在 <code>feature</code> 分支上进行开发。</li>
<li>开发完成后合并回 <code>develop</code> 分支。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git checkout -b feature/my-new-feature</span><br><span class="line"><span class="comment"># 开发新功能</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Add new feature&quot;</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge feature/my-new-feature</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>发布准备</strong>：</p>
<ul>
<li>从 <code>develop</code> 分支创建一个 <code>release</code> 分支。</li>
<li>在 <code>release</code> 分支上进行发布前的准备工作（例如，修复bug、更新文档）。</li>
<li>准备完成后合并回 <code>main</code> 和 <code>develop</code> 分支，并打上标签。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git checkout -b release/1.0.0</span><br><span class="line"><span class="comment"># 准备发布</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Prepare release 1.0.0&quot;</span></span><br><span class="line">git checkout main</span><br><span class="line">git merge release/1.0.0</span><br><span class="line">git tag -a 1.0.0 -m <span class="string">&quot;Release 1.0.0&quot;</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge release/1.0.0</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修复紧急问题</strong>：</p>
<ul>
<li>从 <code>main</code> 分支创建一个 <code>hotfix</code> 分支。</li>
<li>在 <code>hotfix</code> 分支上进行修复。</li>
<li>修复完成后合并回 <code>main</code> 和 <code>develop</code> 分支，并打上标签。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git checkout -b hotfix/1.0.1</span><br><span class="line"><span class="comment"># 修复问题</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Fix urgent issue&quot;</span></span><br><span class="line">git checkout main</span><br><span class="line">git merge hotfix/1.0.1</span><br><span class="line">git tag -a 1.0.1 -m <span class="string">&quot;Release 1.0.1&quot;</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge hotfix/1.0.1</span><br></pre></td></tr></table></figure></li>
</ol>
<p><a href="/../img/git/git-flow-4.svg" title="Git Flow" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/git-flow-4.svg" alt="Git Flow"></a></p>
<h4 id="GitHub-Flow"><a href="#GitHub-Flow" class="headerlink" title="GitHub Flow"></a>GitHub Flow</h4><p>GitHub Flow 是一种更简单的工作流模型，适用于发布频繁的项目。它只有一个长期存在的主分支 <code>main</code>，所有开发都在单独的功能分支上进行。</p>
<p>可参考：<a target="_blank" rel="noopener" href="https://docs.github.com/zh/get-started/using-github/github-flow">GitHub 流 - GitHub 文档</a></p>
<p>官方推荐流程：</p>
<ul>
<li>第一步：根据需求，从main拉出新分支，不区分功能分支或补丁分支。</li>
<li>第二步：新分支开发完成后，或者需要讨论的时候，就向main发起一个pull request（简称PR）。</li>
<li>第三步：Pull Request既是一个通知，让别人注意到你的请求，又是一种对话机制，大家一起评审和讨论你的代码。对话过程中，你还可以不断提交代码。</li>
<li>第四步：你的Pull Request被接受，合并进main，重新部署后，原来你拉出来的那个分支就被删除。（先部署再合并也可。）</li>
</ul>
<p><a href="/../img/git/git-flow.svg" title="Git Flow example" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/git-flow.svg" alt="Git Flow example"></a></p>
<h3 id="分支命名"><a href="#分支命名" class="headerlink" title="分支命名"></a>分支命名</h3><p>推荐使用带有意义的描述性名称来命名分支</p>
<p>版本发布分支&#x2F;Tag示例：v1.0.0</p>
<p>功能分支示例：feature-login-page</p>
<p>修复分支示例： hotfix-#issueid-desc</p>
<h3 id="分支管理习惯"><a href="#分支管理习惯" class="headerlink" title="分支管理习惯"></a>分支管理习惯</h3><p>定期合并已经验证成功的分支，即使删除已经合并的分支</p>
<p>保持合适的分支数量</p>
<p>为分支设置合适的管理权限</p>
<h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><h3 id="为-Git-添加代理"><a href="#为-Git-添加代理" class="headerlink" title="为 Git 添加代理"></a>为 Git 添加代理</h3><p>国内网络直接 Git clone可能会出现网络错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\23351\Desktop&gt; git <span class="built_in">clone</span> https://github.com/jay1an/jay1an.github.io.git jay1an</span><br><span class="line">Cloning into <span class="string">&#x27;jay1an&#x27;</span>...</span><br><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/jay1an/jay1an.github.io.git/&#x27;</span>: Failed to connect to github.com port 443 after 21075 ms: Couldn<span class="string">&#x27;t connect to server</span></span><br><span class="line"><span class="string">PS C:\Users\23351\Desktop&gt; git clone https://github.com/jay1an/jay1an.github.io.git jay1an</span></span><br><span class="line"><span class="string">Cloning into &#x27;</span>jay1an<span class="string">&#x27;...</span></span><br><span class="line"><span class="string">error: RPC failed; curl 28 Recv failure: Connection was aborted</span></span><br><span class="line"><span class="string">fatal: expected flush after ref listing</span></span><br></pre></td></tr></table></figure>

<p>需要在 Git 配置中添加代理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\23351\Desktop&gt; git config --global http.proxy 127.0.0.1:7890</span><br><span class="line">PS C:\Users\23351\Desktop&gt; git config --global https.proxy 127.0.0.1:7890</span><br></pre></td></tr></table></figure>

<p>端口与本机的代理程序一致。</p>
<p><a href="/../img/git/image-20240713155436633.png" title="image-20240713155436633" class="gallery-item" style="box-shadow: none;"> <img src="/../img/git/image-20240713155436633.png" alt="image-20240713155436633"></a></p>
<p>配置完之后就可以解决连接问题了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\23351\Desktop&gt; git <span class="built_in">clone</span> https://github.com/jay1an/jay1an.github.io.git jay1an</span><br><span class="line">Cloning into <span class="string">&#x27;jay1an&#x27;</span>...</span><br><span class="line">error: RPC failed; curl 28 Recv failure: Connection was aborted</span><br><span class="line">fatal: expected flush after ref listing</span><br><span class="line">PS C:\Users\23351\Desktop&gt; git config --global http.proxy 127.0.0.1:7890</span><br><span class="line">PS C:\Users\23351\Desktop&gt; git config --global https.proxy 127.0.0.1:7890</span><br><span class="line">PS C:\Users\23351\Desktop&gt; git <span class="built_in">clone</span> https://github.com/jay1an/jay1an.github.io.git jay1an</span><br><span class="line">Cloning into <span class="string">&#x27;jay1an&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 2264, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (904/904), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (245/245), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 2264 (delta 364), reused 846 (delta 324), pack-reused 1360</span><br><span class="line">Receiving objects: 100% (2264/2264), 63.95 MiB | 2.55 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (648/648), <span class="keyword">done</span>.</span><br><span class="line">Updating files: 100% (807/807), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>

</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2024-01-15</span>
            
                <span>该篇文章被 jay1an</span>
            
            
                <span>打上标签:
                    
                    
                        <a href='/tags/Git/'>
                            Git
                        </a>
                    
                </span>
             
             
                <span>归为分类:
                    
                    
                        <a href='/categories/%E5%9F%BA%E7%A1%80/'>
                            基础
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>上一篇：<a href='/2024/05/20/algorithms-prefix-sum/'>前缀和 - Prefix Sum</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2023/12/28/Malware-Analysis-Practice3/">Malware Analysis Practice3</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            © 1949-2024 Jay1an 

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>从头努力也坎坷</span>
            
                <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>